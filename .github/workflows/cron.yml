name: Trigger Notification Cron Job

on:
  schedule:
    # 5分ごとに実行（非公開リポジトリの場合、30分ごとなどにする）
    - cron: '*/5 * * * *'
  workflow_dispatch: # 手動実行も可能にする

jobs:
  trigger_cron:
    runs-on: ubuntu-latest
    steps:
      - name: Call Vercel Cron API
        run: |
          curl -v --fail --request POST \
            --url '${{ secrets.VERCEL_URL }}/api/cron/send-notifications' \
            --header 'Authorization: Bearer ${{ secrets.CRON_SECRET }}'
